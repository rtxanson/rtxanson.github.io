$(document).ready(function(){$(".strengths").hide();function prepare(evt){$(".strengths").hide();$("#cantPrintThis").show();$("#compatibility_notice").hide();$("#cantPrintThis").click(function(e){$(".strengths").toggle("slideUp");$("#tag_cloud").toggle("slideUp");$("#cantPrintThis span").toggle("fade")});return true}function render_tag_cloud(prepare_things){prepare_things();var fill=d3.scale.category20();var font_fam="Open Sans";function display_it(){$(".strengths").fadeOut();$("#tag_cloud").fadeIn()}function pluck_html_data(node,i){return{text:$(node).html(),size:10+15+i}}function pluck_html_data_value(node,i){var $n=$(node);var node_value=parseInt($n.attr("data-size"));return{text:$n.html(),size:node_value}}var assorted=$(".assorted li.tag").get().reverse().map(pluck_html_data),important=$(".important li.tag").get().reverse().map(pluck_html_data_value);window.assorted=assorted;window.important=important;var w=$("#tag_cloud").width(),h=1400,words=important.concat(assorted);d3.layout.cloud().size([w,h]).spiral("rectangular").words(words).padding(5).rotate(function(){return~~(Math.random()*2)*-72}).font(font_fam).fontSize(function(d){return d.size}).on("end",draw).start();function draw(words,bounds){scale=bounds?Math.min(w/Math.abs(bounds[1].x-w/2),w/Math.abs(bounds[0].x-w/2),h/Math.abs(bounds[1].y-h/2),h/Math.abs(bounds[0].y-h/2))/2:1;d3.select("#tag_cloud").append("svg").attr("width",w).attr("height",h).append("g").attr("transform","translate("+[w>>1,h>>1]+")scale("+scale+")").selectAll("text").data(words).enter().append("text").style("font-size",function(d){return d.size+"px"}).style("font-family",font_fam).style("fill",function(d,i){return fill(i)}).attr("text-anchor","middle").attr("transform",function(d){return"translate("+[d.x,d.y]+")rotate("+d.rotate+")"}).text(function(d){return d.text});display_it()}}if($(window).width()>600){$.when(prepare).then(render_tag_cloud)}});